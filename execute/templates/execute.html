{% extends "base.html" %}
{% block content_title %}
	<title>{{ TITLE }}</title>

{% endblock %}




{% block scripts %}
{% load static %}
	<link href="{% static 'css/execute-graph.css' %}" rel="stylesheet">
	<script type='text/javascript' src='http://d3js.org/d3.v3.min.js'></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="../static/js/highcharts.js" type="text/javascript"></script>
	<script src="../static/js/execute-graph.js" type="text/javascript"></script>
	<script src="../static/js/execute-scripts.js" type="text/javascript"></script>


{% endblock %}


{% block content %}


	<div style="display: flex; flex-flow: row;">
	<div id="config" class="col-md-3" style="color:#DCB543; border-color:#DCB543; 	border: 2px solid;padding:25px;">
		<p class="text-center" style="font-size: 110%;font-weight: 800;">
			EXECUTION PARAMETERS
		</p>
		<form id="frmRIQ" name="frmRIQ" action="" method="POST" >
			{% csrf_token %}
			{% if form.dataset.errors %}
			<div style="color:red;">
				<p class="error">{{form.dataset.errors}}</p>
			</div>
			{% endif %}
			<div class="row"  style="margin-bottom:10px;">
					<div class="form-group">
					<label for = "dataset">Select index:</label>
					<div class="col-sm-12">
						<select id="indexname" NAME="indexname"class="form-control execute">
							{% for value, text in form.dataset.field.choices %}
								<option value="{{ value}}">{{ text}}</option>
							{% endfor %}
						</select>
						<div id = "datasetBTC" style="color:red;display:none">The total numbers of graphs available is 10</div>
					</div>
				</div>

			</div>
			<div class="row"  style="margin-bottom:20px;">
				<div class="form-group">
					<label for = "queries">Query:</label>
					<div class="col-sm-12">
						<select id="queryDisplay"  NAME="queries"class="form-control execute" onchange="showQuery(this);">
							{% for value, text in form.query.field.choices %}
								<option value="{{ value}}">{{ text}}</option>
							{% endfor %}
						</select>
					</div>
				</div>
			</div>

			<div class="row"  style="margin-bottom:10px;">
				<div class="form-group">
					<label for = "cache">Cache:</label>
					<div class="col-sm-12">

							{% for value, text in form.cache.field.choices %}
							<input id="typecache" type="radio"  name="typecache" value="{{ value}}"><label for="typecache" style="color:#000;font-weight:400;"><span><span></span></span>{{ text }}</label><br />

							{% endfor %}

					</div>
				</div>
			</div>


			<div class="row"  style="margin-bottom:10px;">
				<div class="form-group">
					<label for = "optimizationtype">Optimization:</label>
					<div class="col-sm-12">
							{% for value, text in form.optimize.field.choices %}
							<input id="optimizationtype" type="radio"  name="optimizationtype" value="{{ value}}"><label for="optimizationtype" style="color:#000;font-weight:400;"><span><span></span></span>{{ text }}</label><br />

							{% endfor %}
					</div>
				</div>
			</div>


			<div class="row" >
				<div class="form-group">
					<div class="col-sm-12">
						<button id="runquery" type="button" class="btn btn-primary execute-btn" alt="submitData" style="width:100%;" onClick="runRIQ(event);" value="Run RIQ">SUBMIT</button>
					</div>
				</div>
			</div>
			<input type="text" id='query-text' name='qtext' style="display:none"></input>

			<div class="row" style="margin-top:10px;" >
					<div class="col-sm-12" style="color:#DCB543;margin-top:5px;">
					<h5>Note:</h5>
					The query will be executed using the configuration set in the index construction page.
					</div>
			</div>
		</form>
	</div>
	<div class="col-md-9" style="margin-left:5px;">
		<div class="row" style="position: relative;">
			<div style="padding:0;">
				<div class="thrds" style="color:#DCB543; border-color:#DCB543;border: 2px solid; height:450px; position:relative;float:left; display: block;">
					<div class="sliding-content-r">
						<div class="text-center widen" style="font-size: 110%;font-weight: 800; padding-top:10px;">
							QUERY
							<div id="query" class="text-left" contenteditable="true" spellcheck='false' style="color:#000"> </div>
						</div>
					</div>
				</div>
				<div class="thrds"  style="color:#DCB543; border-color:#DCB543;border: 2px solid; height:450px;margin-left:6px;position:relative;float:left; display: block;">
					<div class="sliding-content-lr">
						<div class="text-center widen" style="font-size: 110%;font-weight: 800; padding-top:10px;">
							QUERY GRAPH
							<div id="query-graph" class="text-left">  </div>
						</div>
					</div>
				</div>
				<div class="thrds" style="color:#DCB543; border-color:#DCB543;border: 2px solid; height:450px;margin-left:5px;position:relative;float:right; display: block;">
					<div >
						<div class="text-center widen" style="font-size: 110%;font-weight: 800; padding-top:10px;">
							TIME COMPARISON
							<div id="time" class="text-left">  </div>
						</div>
					</div>
				</div>
			</div>

		</div>
		<div class="row" style="position: relative;">
			<div style="padding:0;">
				<div style="color:#DCB543; border-color:#DCB543;border: 2px solid; height:100px; position:relative;float:left; display: block;width:100%; margin-top:5px;">
					<div class="sliding-content-t">
						<div class="text-center widen" style="font-size: 110%;font-weight: 800; padding-top:10px;">
							RESULTS
							<div id="results" class="text-left" style="color:#000"> </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	//init form
	document.getElementById("indexname").selectedIndex = -1;
	document.getElementById("optimizationtype").selectedIndex = -1;
	document.getElementById("queryDisplay").selectedIndex = -1;
	document.getElementById("query-text").value="";
	$('input:radio').each(function () { $(this).prop('checked', false); });
</script>
{% endblock %}
